{"ast":null,"code":"var _jsxFileName = \"/home/nmisfit/Desktop/course-work/client/src/pages/Auth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory } from \"react-router-dom\";\nimport { login, registration } from '../http/userAPI';\nimport { Context } from \"../index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst useInput = initialValue => {\n  _s();\n\n  const [value, setValue] = useState(initialValue);\n  const [isDirty, setDirty] = useState(false);\n\n  const onChange = e => {\n    setValue(e.target.value);\n  };\n\n  const onBlur = e => {\n    setDirty(true);\n  };\n\n  return {\n    value,\n    onChange,\n    on\n  };\n};\n\n_s(useInput, \"tG9+3wvtqqTNiVJDU49mVO4usqU=\");\n\nconst Auth = () => {\n  _s2();\n\n  const {\n    user\n  } = useContext(Context);\n  const location = useLocation();\n  const history = useHistory();\n  const isLogin = location.pathname === LOGIN_ROUTE;\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const signIn = async () => {\n    try {\n      let data;\n\n      if (isLogin) {\n        data = await login(email, password);\n      } else {\n        data = await registration(email, password);\n      }\n\n      console.log(data);\n      user.setUser(user);\n      user.setIsAuth(true);\n      history.push(MAIN_ROUTE);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"d-flex justify-content-center align-items-center\",\n    style: {\n      height: window.innerHeight - 54\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 600\n      },\n      className: \"p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"m-auto\",\n        children: isLogin ? \"Sign in to the site\" : \"Registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          placeholder: \"Enter your email...\",\n          value: email,\n          onChange: e => setEmail(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          type: \"password\",\n          id: \"inputPassword5\",\n          \"aria-describedby\": \"passwordHelpBlock\",\n          placeholder: \"Enter your password...\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: false,\n        variant: \"outline-success\",\n        className: \"mt-3\",\n        onClick: signIn,\n        children: isLogin ? \"Sign in\" : \"Log up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), isLogin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Don't have an account yet?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: REGISTRATION_ROUTE,\n          children: \" Create an account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: LOGIN_ROUTE,\n          children: \" Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Auth, \"PxddQtYGBAZBYsVxwvCvboTJrtA=\", false, function () {\n  return [useLocation, useHistory];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/home/nmisfit/Desktop/course-work/client/src/pages/Auth.js"],"names":["React","useContext","useState","Button","Card","Container","Form","LOGIN_ROUTE","MAIN_ROUTE","REGISTRATION_ROUTE","NavLink","useLocation","useHistory","login","registration","Context","useInput","initialValue","value","setValue","isDirty","setDirty","onChange","e","target","onBlur","on","Auth","user","location","history","isLogin","pathname","email","setEmail","password","setPassword","signIn","data","console","log","setUser","setIsAuth","push","alert","response","message","height","window","innerHeight","width"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory} from \"react-router-dom\";\nimport { login, registration } from '../http/userAPI';\nimport {Context} from \"../index\";\n\nconst useInput = (initialValue) => {\n  const [value, setValue] = useState(initialValue)\n  const [isDirty, setDirty] = useState(false)\n\n  const onChange = (e) => {\n    setValue(e.target.value)\n  }\n\n  const onBlur = (e) => {\n    setDirty(true)\n  }\n\n  return {\n    value,\n    onChange,\n    on\n  }\n}\nconst Auth = () => {\n  const { user } = useContext(Context)\n  const location = useLocation()\n  const history = useHistory()\n  const isLogin = location.pathname === LOGIN_ROUTE\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n\n  const signIn = async () => {\n    try {\n      let data;\n      if (isLogin) {\n        data = await login(email, password);\n      } else {\n\n        data = await registration(email, password);\n      }\n      console.log(data)\n\n      user.setUser(user)\n      user.setIsAuth(true)\n      history.push(MAIN_ROUTE)\n    } catch (e) {\n      alert(e.response.data.message)\n    }\n  }\n\n  return (\n    <Container\n      className=\"d-flex justify-content-center align-items-center\"\n      style={{ height: window.innerHeight - 54 }}>\n      <Card style={{ width: 600 }} className=\"p-5\">\n        <h2 className=\"m-auto\">{isLogin ? \"Sign in to the site\" : \"Registration\"}</h2>\n        <Form className=\"d-flex flex-column\">\n          <Form.Control\n            className=\"mt-3\"\n            placeholder=\"Enter your email...\"\n            value={email}\n            onChange={e => setEmail(e.target.value)}\n          />\n          <Form.Control\n            className=\"mt-3\"\n            type=\"password\"\n            id=\"inputPassword5\"\n            aria-describedby=\"passwordHelpBlock\"\n            placeholder=\"Enter your password...\"\n            value={password}\n            onChange={e => setPassword(e.target.value)}\n          />\n        </Form>\n\n        <Button\n          disabled={false}\n          variant={\"outline-success\"}\n          className=\"mt-3\"\n          onClick={signIn}>\n          {isLogin ? \"Sign in\" : \"Log up\"}\n        </Button>\n\n        {isLogin ?\n          <div className=\"mt-3\">Don't have an account yet?\n            <NavLink to={REGISTRATION_ROUTE}> Create an account.</NavLink>\n          </div>\n          :\n          <div className=\"mt-3\">Already have an account?\n            <NavLink to={LOGIN_ROUTE}> Sign in</NavLink>\n          </div>}\n      </Card>\n\n    </Container>\n  );\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}