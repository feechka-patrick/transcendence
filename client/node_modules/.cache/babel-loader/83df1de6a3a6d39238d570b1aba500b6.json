{"ast":null,"code":"var _jsxFileName = \"/home/nmisfit/Desktop/course-work/client/src/pages/Account.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport { Card, Form, Row, Col, Button, Container } from 'react-bootstrap';\nimport { useHistory } from 'react-router-dom';\nimport GameTable from '../components/GameTable';\nimport { useInput } from '../components/Validation';\nimport { changeEmail, deleteUser } from '../http/userAPI';\nimport { Context } from \"../index\";\nimport { MAIN_ROUTE } from '../utils/consts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Account = () => {\n  _s();\n  const history = useHistory();\n  const {\n    user\n  } = useContext(Context);\n  const email = useInput(user.email, {\n    isEmpty: true,\n    minLength: 5,\n    isEmail: true\n  });\n  const [password, setPassword] = useState('');\n  const {\n    _user\n  } = useAppSelec(store => store.auth);\n  const changeData = async () => {\n    try {\n      let data = await changeEmail(user.email, email.value, password);\n      user.setEmail(email.value);\n      history.push(MAIN_ROUTE);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n  const deleteData = async () => {\n    try {\n      let data = await deleteUser(user.email, password);\n      user.setIsAuth(false);\n      history.push(MAIN_ROUTE);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"m-5 p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"m-auto\",\n          children: \"Personal data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"email\",\n                placeholder: \"Enter username\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"email\",\n                placeholder: \"Enter email\",\n                value: email.value,\n                onChange: e => email.onChange(e),\n                onBlur: e => email.onBlur(e)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"1234 Main St\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-3\",\n          controlId: \"formHorizontalPassword\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            column: true,\n            sm: 2,\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 10,\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"password\",\n              placeholder: \"Enter current password\",\n              value: password,\n              onChange: e => setPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          as: Row,\n          className: \"mb-5 m-5\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 5,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-dark\",\n              onClick: changeData,\n              disabled: !email.inputValid,\n              className: \"account_btn\",\n              children: \"Save change\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: 5,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-danger\",\n              onClick: deleteData,\n              style: {\n                float: 'right'\n              },\n              className: \"account_btn\",\n              children: \"Delete account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GameTable, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n};\n_s(Account, \"ib/cjGMGx09EseDoNLgXw2a1aeA=\", true, function () {\n  return [useHistory, useInput];\n});\n_c = Account;\nexport default Account;\nvar _c;\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useContext","useState","Card","Form","Row","Col","Button","Container","useHistory","GameTable","useInput","changeEmail","deleteUser","Context","MAIN_ROUTE","Account","history","user","email","isEmpty","minLength","isEmail","password","setPassword","_user","useAppSelec","store","auth","changeData","data","value","setEmail","push","e","alert","response","message","deleteData","setIsAuth","onChange","onBlur","target","inputValid","float"],"sources":["/home/nmisfit/Desktop/course-work/client/src/pages/Account.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Card, Form, Row, Col, Button, Container } from 'react-bootstrap'\nimport { useHistory } from 'react-router-dom';\nimport GameTable from '../components/GameTable';\nimport { useInput } from '../components/Validation';\nimport { changeEmail, deleteUser } from '../http/userAPI';\nimport { Context } from \"../index\";\nimport { MAIN_ROUTE } from '../utils/consts';\n\nconst Account = () => {\n  const history = useHistory()\n  const { user } = useContext(Context)\n  const email = useInput(user.email, { isEmpty: true, minLength: 5, isEmail: true })\n  const [password, setPassword] = useState('')\n\n  const { _user } = useAppSelec((store) => store.auth);\n\n  const changeData = async () => {\n    try {\n      let data = await changeEmail(user.email, email.value, password)\n\n      user.setEmail(email.value)\n      history.push(MAIN_ROUTE)\n    } catch (e) {\n      alert(e.response.data.message)\n    }\n  }\n\n  const deleteData = async () => {\n    try {\n      let data = await deleteUser(user.email, password)\n\n      user.setIsAuth(false)\n      history.push(MAIN_ROUTE)\n    } catch (e) {\n      alert(e.response.data.message)\n    }\n  }\n  return (\n    <Container className=\"mt-5\">\n      <Card className=\"m-5 p-5\">\n        {/* TITLE */}\n        <div className=\"d-flex justify-content-center\">\n          <h2 className=\"m-auto\">Personal data</h2>\n        </div>\n        <Form className=\"mt-5\">\n          {/* EMAIL */}\n          {/* <Form className=\"mt-5\">\n          <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalEmail\">\n            <Form.Label column sm={2}>\n              Email\n            </Form.Label>\n            <Col sm={10}>\n              <Form.Control type=\"email\" placeholder=\"Email\"\n                value={email.value}\n                onChange={e => email.onChange(e)}\n                onBlur={e => email.onBlur(e)} />\n              {(email.isDirty && email.isEmpty) &&\n                <div style={{ color: 'red' }}>Email cannot be empty</div>}\n              {(email.isDirty && email.minLengthError) &&\n                <div style={{ color: 'red' }}>Email cannot be less 5 symbols</div>}\n              {(email.isDirty && email.emailError) &&\n                <div style={{ color: 'red' }}>Incorrect email</div>}\n            </Col>\n          </Form.Group> */}\n\n          <Form>\n            <Row className=\"mb-3\">\n              <Form.Group as={Col}>\n                <Form.Label>Username</Form.Label>\n                <Form.Control type=\"email\" placeholder=\"Enter username\" />\n              </Form.Group>\n\n              <Form.Group as={Col}>\n                <Form.Label>Email</Form.Label>\n                <Form.Control type=\"email\" placeholder=\"Enter email\"\n                  value={email.value}\n                  onChange={e => email.onChange(e)}\n                  onBlur={e => email.onBlur(e)} />\n              </Form.Group>\n            </Row>\n\n            <Form.Group className=\"mb-3\">\n              <Form.Label>Address</Form.Label>\n              <Form.Control placeholder=\"1234 Main St\" />\n            </Form.Group>\n\n          </Form>\n\n          {/* PASSWORD */}\n          <Form.Group as={Row} className=\"mb-3\" controlId=\"formHorizontalPassword\">\n            <Form.Label column sm={2}>\n              Password\n            </Form.Label>\n            <Col sm={10}>\n              <Form.Control type=\"password\" placeholder=\"Enter current password\"\n                value={password}\n                onChange={e => setPassword(e.target.value)}\n              />\n            </Col>\n          </Form.Group>\n\n\n          <Form.Group as={Row} className=\"mb-5 m-5\">\n            <Col></Col>\n\n            {/* BUTTON SAVE CHANGE */}\n            <Col sm={5}>\n              <Button variant={\"outline-dark\"}\n                onClick={changeData}\n                disabled={!email.inputValid}\n                className='account_btn'>\n                Save change</Button>\n            </Col>\n\n            {/* BUTTON DELETE USER */}\n            <Col sm={5}>\n              <Button variant={\"outline-danger\"}\n                onClick={deleteData}\n                style={{ float: 'right' }}\n                className='account_btn'>\n                Delete account</Button>\n            </Col>\n          </Form.Group>\n        </Form>\n\n        {/* GAME HISTORY TABLE */}\n        <GameTable />\n\n      </Card>\n    </Container >\n  );\n}\n\nexport default Account;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}