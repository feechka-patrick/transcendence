{"ast":null,"code":"var _jsxFileName = \"/home/nmisfit/Desktop/course-work/client/src/pages/Auth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory } from \"react-router-dom\";\nimport { login, registration } from '../http/userAPI';\nimport { Context } from \"../index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst useValidation = (value, validations) => {\n  _s();\n\n  const [isEmpty, setEmpty] = useState(true);\n  const [minLengthError, setMinLengthError] = useState(false);\n  useEffect(() => {\n    for (const validation in validations) {\n      switch (validation) {\n        case 'minLength':\n          value.length;\n          break;\n\n        default:\n          break;\n      }\n    }\n  }, [value]);\n};\n\n_s(useValidation, \"SWUNx43QCMutgVgXHT4eB4wViiQ=\");\n\nconst useInput = initialValue => {\n  _s2();\n\n  const [value, setValue] = useState(initialValue);\n  const [isDirty, setDirty] = useState(false);\n\n  const onChange = e => {\n    setValue(e.target.value);\n  };\n\n  const onBlur = e => {\n    setDirty(true);\n  };\n\n  return {\n    value,\n    onChange,\n    onBlur\n  };\n};\n\n_s2(useInput, \"tG9+3wvtqqTNiVJDU49mVO4usqU=\");\n\nconst Auth = () => {\n  _s3();\n\n  const {\n    user\n  } = useContext(Context);\n  const location = useLocation();\n  const history = useHistory();\n  const isLogin = location.pathname === LOGIN_ROUTE; // const [email, setEmail] = useState('')\n  // const [password, setPassword] = useState('')\n\n  const email = useInput('');\n  const password = useInput('');\n\n  const signIn = async () => {\n    try {\n      let data;\n\n      if (isLogin) {\n        data = await login(email.value, password.value);\n      } else {\n        data = await registration(email.value, password.value);\n      }\n\n      console.log(data);\n      user.setUser(user);\n      user.setIsAuth(true);\n      history.push(MAIN_ROUTE);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"d-flex justify-content-center align-items-center\",\n    style: {\n      height: window.innerHeight - 54\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 600\n      },\n      className: \"p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"m-auto\",\n        children: isLogin ? \"Sign in to the site\" : \"Registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          placeholder: \"Enter your email...\",\n          value: email.value,\n          onChange: e => email.onChange(e),\n          onBlur: e => email.onBlur(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          type: \"password\",\n          id: \"inputPassword5\",\n          \"aria-describedby\": \"passwordHelpBlock\",\n          placeholder: \"Enter your password...\",\n          value: password.value,\n          onChange: e => password.onChange(e),\n          onBlur: e => password.onBlur(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: false,\n        variant: \"outline-success\",\n        className: \"mt-3\",\n        onClick: signIn,\n        children: isLogin ? \"Sign in\" : \"Log up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), isLogin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Don't have an account yet?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: REGISTRATION_ROUTE,\n          children: \" Create an account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: LOGIN_ROUTE,\n          children: \" Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(Auth, \"GS4PalDWEoU3M+qBLphEWNrXNV8=\", false, function () {\n  return [useLocation, useHistory, useInput, useInput];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/home/nmisfit/Desktop/course-work/client/src/pages/Auth.js"],"names":["React","useContext","useState","Button","Card","Container","Form","LOGIN_ROUTE","MAIN_ROUTE","REGISTRATION_ROUTE","NavLink","useLocation","useHistory","login","registration","Context","useValidation","value","validations","isEmpty","setEmpty","minLengthError","setMinLengthError","useEffect","validation","length","useInput","initialValue","setValue","isDirty","setDirty","onChange","e","target","onBlur","Auth","user","location","history","isLogin","pathname","email","password","signIn","data","console","log","setUser","setIsAuth","push","alert","response","message","height","window","innerHeight","width"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory} from \"react-router-dom\";\nimport { login, registration } from '../http/userAPI';\nimport {Context} from \"../index\";\n\nconst useValidation = (value, validations) => {\n  const [isEmpty, setEmpty] = useState(true)\n  const [minLengthError, setMinLengthError] = useState(false)\n\n  useEffect(() => {\n    for (const validation in validations) {\n      switch (validation) {\n        case 'minLength':\n          value.length\n          break;\n      \n        default:\n          break;\n      }\n    }\n  }, [value])\n}\nconst useInput = (initialValue) => {\n  const [value, setValue] = useState(initialValue)\n  const [isDirty, setDirty] = useState(false)\n\n  const onChange = (e) => {\n    setValue(e.target.value)\n  }\n\n  const onBlur = (e) => {\n    setDirty(true)\n  }\n\n  return {\n    value,\n    onChange,\n    onBlur\n  }\n}\n\n\nconst Auth = () => {\n  const { user } = useContext(Context)\n  const location = useLocation()\n  const history = useHistory()\n  const isLogin = location.pathname === LOGIN_ROUTE\n  // const [email, setEmail] = useState('')\n  // const [password, setPassword] = useState('')\n\n  const email = useInput('')\n  const password = useInput('')\n\n  const signIn = async () => {\n    try {\n      let data;\n      if (isLogin) {\n        data = await login(email.value, password.value);\n      } else {\n\n        data = await registration(email.value, password.value);\n      }\n      console.log(data)\n\n      user.setUser(user)\n      user.setIsAuth(true)\n      history.push(MAIN_ROUTE)\n    } catch (e) {\n      alert(e.response.data.message)\n    }\n  }\n\n  return (\n    <Container\n      className=\"d-flex justify-content-center align-items-center\"\n      style={{ height: window.innerHeight - 54 }}>\n      <Card style={{ width: 600 }} className=\"p-5\">\n        <h2 className=\"m-auto\">{isLogin ? \"Sign in to the site\" : \"Registration\"}</h2>\n        <Form className=\"d-flex flex-column\">\n          <Form.Control\n            className=\"mt-3\"\n            placeholder=\"Enter your email...\"\n            value={email.value}\n            onChange={e => email.onChange(e)}\n            onBlur={e => email.onBlur(e)}\n          />\n          <Form.Control\n            className=\"mt-3\"\n            type=\"password\"\n            id=\"inputPassword5\"\n            aria-describedby=\"passwordHelpBlock\"\n            placeholder=\"Enter your password...\"\n            value={password.value}\n            onChange={e => password.onChange(e)}\n            onBlur={e => password.onBlur(e)}\n          />\n        </Form>\n\n        <Button\n          disabled={false}\n          variant={\"outline-success\"}\n          className=\"mt-3\"\n          onClick={signIn}>\n          {isLogin ? \"Sign in\" : \"Log up\"}\n        </Button>\n\n        {isLogin ?\n          <div className=\"mt-3\">Don't have an account yet?\n            <NavLink to={REGISTRATION_ROUTE}> Create an account.</NavLink>\n          </div>\n          :\n          <div className=\"mt-3\">Already have an account?\n            <NavLink to={LOGIN_ROUTE}> Sign in</NavLink>\n          </div>}\n      </Card>\n\n    </Container>\n  );\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}