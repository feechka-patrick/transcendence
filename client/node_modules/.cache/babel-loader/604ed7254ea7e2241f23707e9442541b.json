{"ast":null,"code":"var _jsxFileName = \"/home/feechka-patrick/Desktop/course-work/client/src/pages/Auth.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory } from \"react-router-dom\";\nimport { decodeToken, getGamesByUser, login, registration } from '../http/userAPI';\nimport { Context } from \"../index\";\nimport { useInput } from '../components/Validation';\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\nimport { setUser } from '../store/features/userSlice';\nimport { store } from '../store/store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Auth = () => {\n  _s();\n  const {\n    user\n  } = useContext(Context);\n  const location = useLocation();\n  const history = useHistory();\n  const isLogin = location.pathname === LOGIN_ROUTE;\n  const email = useInput('', {\n    isEmpty: true,\n    minLength: 5,\n    isEmail: true\n  });\n  const password = useInput('', {\n    isEmpty: true,\n    minLength: 3\n  });\n  const {\n    _user\n  } = useAppSelector(store => store);\n  const dispatch = useAppDispatch();\n  const state = store.getState();\n  const signIn = async () => {\n    debugger;\n    try {\n      let data;\n      if (isLogin) {\n        data = await login(email.value, password.value);\n      } else {\n        data = await registration(email.value, password.value);\n      }\n      dispatch(setUser({\n        ...state,\n        user: data\n      }));\n      user.setUser(user);\n      user.setIsAuth(true);\n      history.push(MAIN_ROUTE);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"d-flex justify-content-center align-items-center\",\n    style: {\n      height: window.innerHeight - 54\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 600\n      },\n      className: \"p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"m-auto\",\n        children: isLogin ? \"Sign in to the site\" : \"Registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          placeholder: \"Enter your email...\",\n          value: email.value,\n          onChange: e => email.onChange(e),\n          onBlur: e => email.onBlur(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 6\n        }, this), !isLogin && email.isDirty && email.isEmpty && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Email cannot be empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 8\n        }, this), !isLogin && email.isDirty && email.minLengthError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Email cannot be less 5 symbols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 8\n        }, this), !isLogin && email.isDirty && email.emailError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Incorrect email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          type: \"password\",\n          id: \"inputPassword5\",\n          \"aria-describedby\": \"passwordHelpBlock\",\n          placeholder: \"Enter your password...\",\n          value: password.value,\n          onChange: e => password.onChange(e),\n          onBlur: e => password.onBlur(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this), !isLogin && password.isDirty && password.isEmpty && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Password cannot be empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 8\n        }, this), !isLogin && password.isDirty && password.minLengthError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Password cannot be less 3 and more 8 symbols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: false,\n        variant: \"outline-success\",\n        className: \"mt-3\",\n        onClick: signIn,\n        children: isLogin ? \"Sign in\" : \"Log up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), isLogin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Don't have an account yet?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: REGISTRATION_ROUTE,\n          children: \" Create an account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: LOGIN_ROUTE,\n          children: \" Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 3\n  }, this);\n};\n_s(Auth, \"hM5kDBBhgghp+6j0nGm5EnBuhNc=\", false, function () {\n  return [useLocation, useHistory, useInput, useInput, useAppSelector, useAppDispatch];\n});\n_c = Auth;\nexport default Auth;\nvar _c;\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"names":["React","useContext","useState","useEffect","Button","Card","Container","Form","LOGIN_ROUTE","MAIN_ROUTE","REGISTRATION_ROUTE","NavLink","useLocation","useHistory","decodeToken","getGamesByUser","login","registration","Context","useInput","useAppDispatch","useAppSelector","setUser","store","Auth","user","location","history","isLogin","pathname","email","isEmpty","minLength","isEmail","password","_user","dispatch","state","getState","signIn","data","value","setIsAuth","push","e","alert","response","message","height","window","innerHeight","width","onChange","onBlur","isDirty","color","minLengthError","emailError"],"sources":["/home/feechka-patrick/Desktop/course-work/client/src/pages/Auth.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory} from \"react-router-dom\";\nimport { decodeToken, getGamesByUser, login, registration } from '../http/userAPI';\nimport {Context} from \"../index\";\nimport { useInput } from '../components/Validation';\nimport { useAppDispatch, useAppSelector } from '../store/hooks';\nimport { setUser } from '../store/features/userSlice';\nimport { store } from '../store/store';\n\nconst Auth = () => {\n\tconst { user } = useContext(Context)\n\tconst location = useLocation()\n\tconst history = useHistory()\n\tconst isLogin = location.pathname === LOGIN_ROUTE\n\tconst email = useInput('', {isEmpty: true, minLength: 5, isEmail:true})\n\tconst password = useInput('', {isEmpty: true, minLength: 3})\n\n\tconst { _user } = useAppSelector((store) => store);\n\tconst dispatch = useAppDispatch();\n\tconst state = store.getState();\n\n\tconst signIn = async () => {\n\t\tdebugger\n\t\ttry {\n\t\t\tlet data;\n\t\t\tif (isLogin) {\n\t\t\t\tdata = await login(email.value, password.value);\n\t\t\t} else {\n\t\t\t\tdata = await registration(email.value, password.value);\n\t\t\t}\n\n\t\t\tdispatch(setUser({ ...state, user: data }));\n\n\t\t\tuser.setUser(user)\n\t\t\tuser.setIsAuth(true)\n\n\t\t\thistory.push(MAIN_ROUTE)\n\t\t} catch (e) {\n\t\t\talert(e.response.data.message)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Container\n\t\t\tclassName=\"d-flex justify-content-center align-items-center\"\n\t\t\tstyle={{ height: window.innerHeight - 54 }}>\n\t\t\t<Card style={{ width: 600 }} className=\"p-5\">\n\t\t\t\t<h2 className=\"m-auto\">{isLogin ? \"Sign in to the site\" : \"Registration\"}</h2>\n\t\t\t\t<Form className=\"d-flex flex-column\">\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\tplaceholder=\"Enter your email...\"\n\t\t\t\t\t\tvalue={email.value}\n\t\t\t\t\t\tonChange={e => email.onChange(e)}\n\t\t\t\t\t\tonBlur={e => email.onBlur(e)}\n\t\t\t\t\t/>\n\t\t\t\t\t{(!isLogin && email.isDirty && email.isEmpty) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Email cannot be empty</div>}\n\t\t\t\t\t{(!isLogin && email.isDirty && email.minLengthError) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Email cannot be less 5 symbols</div>}\n\t\t\t\t\t{(!isLogin && email.isDirty && email.emailError) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Incorrect email</div>}\t\t\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tid=\"inputPassword5\"\n\t\t\t\t\t\taria-describedby=\"passwordHelpBlock\"\n\t\t\t\t\t\tplaceholder=\"Enter your password...\"\n\t\t\t\t\t\tvalue={password.value}\n\t\t\t\t\t\tonChange={e => password.onChange(e)}\n\t\t\t\t\t\tonBlur={e => password.onBlur(e)}\n\t\t\t\t\t/>\n\t\t\t\t\t{(!isLogin && password.isDirty && password.isEmpty) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Password cannot be empty</div>}\n\t\t\t\t\t{(!isLogin && password.isDirty && password.minLengthError) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Password cannot be less 3 and more 8 symbols</div>}\n\t\t\t\t</Form>\n\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={false}\n\t\t\t\t\tvariant={\"outline-success\"}\n\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\tonClick={signIn}>\n\t\t\t\t\t{isLogin ? \"Sign in\" : \"Log up\"}\n\t\t\t\t</Button>\n\n\t\t\t\t{isLogin ?\n\t\t\t\t\t<div className=\"mt-3\">Don't have an account yet?\n\t\t\t\t\t\t<NavLink to={REGISTRATION_ROUTE}> Create an account.</NavLink>\n\t\t\t\t\t</div>\n\t\t\t\t\t:\n\t\t\t\t\t<div className=\"mt-3\">Already have an account?\n\t\t\t\t\t\t<NavLink to={LOGIN_ROUTE}> Sign in</NavLink>\n\t\t\t\t\t</div>}\n\t\t\t</Card>\n\n\t\t</Container>\n\t);\n}\n\nexport default Auth;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}