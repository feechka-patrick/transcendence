{"ast":null,"code":"var _jsxFileName = \"/home/nmisfit/Desktop/course-work/client/src/pages/Auth.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory } from \"react-router-dom\";\nimport { login, registration } from '../http/userAPI';\nimport { Context } from \"../index\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst useValidation = (value, validations) => {\n  _s();\n\n  const [isEmpty, setEmpty] = useState(true);\n  const [minLengthError, setMinLengthError] = useState(false);\n  const [emailError, setEmailError] = useState(false);\n  const [inputValid, setInputValid] = useState(false);\n  useEffect(() => {\n    for (const validation in validations) {\n      switch (validation) {\n        case 'minLength':\n          value.length < validations[validation] ? setMinLengthError(true) : setMinLengthError(false);\n          break;\n\n        case 'isEmpty':\n          value ? setEmpty(false) : setEmpty(true);\n          break;\n\n        case 'isEmail':\n          const re = /\\S+@\\S+\\.\\S+/;\n          re.test(String(value).toLowerCase()) ? setEmailError(false) : setEmailError(true);\n          break;\n      }\n    }\n  }, [value]);\n  useEffect(() => {\n    if (isEmpty || minLengthError || emailError) setInputValid(false);else {\n      setInputValid(true);\n    }\n  }, [isEmpty, minLengthError, emailError]);\n  return {\n    isEmpty,\n    minLengthError,\n    emailError,\n    inputValid\n  };\n};\n\n_s(useValidation, \"L/bdn5W5lRlZjjvbLdxGi1Ayzmw=\");\n\nconst useInput = (initialValue, validations) => {\n  _s2();\n\n  const [value, setValue] = useState(initialValue);\n  const [isDirty, setDirty] = useState(false);\n  const valid = useValidation(value, validations);\n\n  const onChange = e => {\n    setValue(e.target.value);\n  };\n\n  const onBlur = e => {\n    setDirty(true);\n  };\n\n  return {\n    value,\n    onChange,\n    onBlur,\n    isDirty,\n    ...valid\n  };\n};\n\n_s2(useInput, \"ROXCByPZsuh/SPOaQe5dG6oyq/A=\", false, function () {\n  return [useValidation];\n});\n\nconst Auth = () => {\n  _s3();\n\n  const {\n    user\n  } = useContext(Context);\n  const location = useLocation();\n  const history = useHistory();\n  const isLogin = location.pathname === LOGIN_ROUTE;\n  const email = useInput('', {\n    isEmpty: true,\n    minLength: 5,\n    isEmail: true\n  });\n  const password = useInput('', {\n    isEmpty: true,\n    minLength: 3\n  });\n\n  const signIn = async () => {\n    try {\n      let data;\n\n      if (isLogin) {\n        data = await login(email.value, password.value);\n      } else {\n        data = await registration(email.value, password.value);\n      }\n\n      console.log(data);\n      user.setUser(user);\n      user.setIsAuth(true);\n      history.push(MAIN_ROUTE);\n    } catch (e) {\n      alert(e.response.data.message);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"d-flex justify-content-center align-items-center\",\n    style: {\n      height: window.innerHeight - 54\n    },\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      style: {\n        width: 600\n      },\n      className: \"p-5\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"m-auto\",\n        children: isLogin ? \"Sign in to the site\" : \"Registration\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        className: \"d-flex flex-column\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          placeholder: \"Enter your email...\",\n          value: email.value,\n          onChange: e => email.onChange(e),\n          onBlur: e => email.onBlur(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 6\n        }, this), !isLogin && email.isDirty && email.isEmpty && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Email cannot be empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 8\n        }, this), !isLogin && email.isDirty && email.minLengthError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Email cannot be less 5 symbols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 8\n        }, this), !isLogin && email.isDirty && email.emailError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Incorrect email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          className: \"mt-3\",\n          type: \"password\",\n          id: \"inputPassword5\",\n          \"aria-describedby\": \"passwordHelpBlock\",\n          placeholder: \"Enter your password...\",\n          value: password.value,\n          onChange: e => password.onChange(e),\n          onBlur: e => password.onBlur(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 6\n        }, this), !isLogin && password.isDirty && password.isEmpty && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Password cannot be empty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 8\n        }, this), !isLogin && password.isDirty && password.minLengthError && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'red'\n          },\n          children: \"Password cannot be less 3 and more 8 symbols\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 8\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        disabled: !email.inputValid || !password.inputValid,\n        variant: \"outline-success\",\n        className: \"mt-3\",\n        onClick: signIn,\n        children: isLogin ? \"Sign in\" : \"Log up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 5\n      }, this), isLogin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Don't have an account yet?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: REGISTRATION_ROUTE,\n          children: \" Create an account.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 6\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [\"Already have an account?\", /*#__PURE__*/_jsxDEV(NavLink, {\n          to: LOGIN_ROUTE,\n          children: \" Sign in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 3\n  }, this);\n};\n\n_s3(Auth, \"GS4PalDWEoU3M+qBLphEWNrXNV8=\", false, function () {\n  return [useLocation, useHistory, useInput, useInput];\n});\n\n_c = Auth;\nexport default Auth;\n\nvar _c;\n\n$RefreshReg$(_c, \"Auth\");","map":{"version":3,"sources":["/home/nmisfit/Desktop/course-work/client/src/pages/Auth.js"],"names":["React","useContext","useState","useEffect","Button","Card","Container","Form","LOGIN_ROUTE","MAIN_ROUTE","REGISTRATION_ROUTE","NavLink","useLocation","useHistory","login","registration","Context","useValidation","value","validations","isEmpty","setEmpty","minLengthError","setMinLengthError","emailError","setEmailError","inputValid","setInputValid","validation","length","re","test","String","toLowerCase","useInput","initialValue","setValue","isDirty","setDirty","valid","onChange","e","target","onBlur","Auth","user","location","history","isLogin","pathname","email","minLength","isEmail","password","signIn","data","console","log","setUser","setIsAuth","push","alert","response","message","height","window","innerHeight","width","color"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { Button, Card, Container, Form } from 'react-bootstrap';\nimport { LOGIN_ROUTE, MAIN_ROUTE, REGISTRATION_ROUTE } from '../utils/consts';\nimport { NavLink, useLocation, useHistory} from \"react-router-dom\";\nimport { login, registration } from '../http/userAPI';\nimport {Context} from \"../index\";\n\nconst useValidation = (value, validations) => {\n\tconst [isEmpty, setEmpty] = useState(true)\n\tconst [minLengthError, setMinLengthError] = useState(false)\n\tconst [emailError, setEmailError] = useState(false)\n\tconst [inputValid, setInputValid] = useState(false)\n\n\n\tuseEffect( () => {\n\t\tfor (const validation in validations) {\n\t\t\tswitch (validation) {\n\t\t\t\tcase 'minLength':\n\t\t\t\t\tvalue.length < validations[validation] ? setMinLengthError(true) : setMinLengthError(false)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'isEmpty':\n\t\t\t\t\tvalue ? setEmpty(false) : setEmpty(true)\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'isEmail':\n\t\t\t\t\tconst re = /\\S+@\\S+\\.\\S+/;\n\t\t\t\t\tre.test(String(value).toLowerCase()) ? setEmailError(false) : setEmailError(true)\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}, [value])\n\n\tuseEffect(() => {\n\t\tif (isEmpty || minLengthError || emailError)\n\t\t\tsetInputValid(false)\n\t\telse {\n\t\t\t\tsetInputValid(true)\n\t\t\t}\n\t}, [isEmpty, minLengthError, emailError])\n\n\treturn {\n\t\tisEmpty,\n\t\tminLengthError,\n\t\temailError,\n\t\tinputValid\n\t}\n}\n\nconst useInput = (initialValue, validations) => {\n\tconst [value, setValue] = useState(initialValue)\n\tconst [isDirty, setDirty] = useState(false)\n\tconst valid = useValidation(value, validations)\n\n\tconst onChange = (e) => {\n\t\tsetValue(e.target.value)\n\t}\n\n\tconst onBlur = (e) => {\n\t\tsetDirty(true)\n\t}\n\n\treturn {\n\t\tvalue,\n\t\tonChange,\n\t\tonBlur,\n\t\tisDirty,\n\t\t...valid\n\t}\n}\n\n\nconst Auth = () => {\n\tconst { user } = useContext(Context)\n\tconst location = useLocation()\n\tconst history = useHistory()\n\tconst isLogin = location.pathname === LOGIN_ROUTE\n\tconst email = useInput('', {isEmpty: true, minLength: 5, isEmail:true})\n\tconst password = useInput('', {isEmpty: true, minLength: 3})\n\n\tconst signIn = async () => {\n\t\ttry {\n\t\t\tlet data;\n\t\t\tif (isLogin) {\n\t\t\t\tdata = await login(email.value, password.value);\n\t\t\t} else {\n\n\t\t\t\tdata = await registration(email.value, password.value);\n\t\t\t}\n\t\t\tconsole.log(data)\n\n\t\t\tuser.setUser(user)\n\t\t\tuser.setIsAuth(true)\n\t\t\thistory.push(MAIN_ROUTE)\n\t\t} catch (e) {\n\t\t\talert(e.response.data.message)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Container\n\t\t\tclassName=\"d-flex justify-content-center align-items-center\"\n\t\t\tstyle={{ height: window.innerHeight - 54 }}>\n\t\t\t<Card style={{ width: 600 }} className=\"p-5\">\n\t\t\t\t<h2 className=\"m-auto\">{isLogin ? \"Sign in to the site\" : \"Registration\"}</h2>\n\t\t\t\t<Form className=\"d-flex flex-column\">\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\tplaceholder=\"Enter your email...\"\n\t\t\t\t\t\tvalue={email.value}\n\t\t\t\t\t\tonChange={e => email.onChange(e)}\n\t\t\t\t\t\tonBlur={e => email.onBlur(e)}\n\t\t\t\t\t/>\n\t\t\t\t\t{(!isLogin && email.isDirty && email.isEmpty) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Email cannot be empty</div>}\n\t\t\t\t\t{(!isLogin && email.isDirty && email.minLengthError) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Email cannot be less 5 symbols</div>}\n\t\t\t\t\t{(!isLogin && email.isDirty && email.emailError) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Incorrect email</div>}\t\t\n\t\t\t\t\t<Form.Control\n\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\tid=\"inputPassword5\"\n\t\t\t\t\t\taria-describedby=\"passwordHelpBlock\"\n\t\t\t\t\t\tplaceholder=\"Enter your password...\"\n\t\t\t\t\t\tvalue={password.value}\n\t\t\t\t\t\tonChange={e => password.onChange(e)}\n\t\t\t\t\t\tonBlur={e => password.onBlur(e)}\n\t\t\t\t\t/>\n\t\t\t\t\t{(!isLogin && password.isDirty && password.isEmpty) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Password cannot be empty</div>}\n\t\t\t\t\t{(!isLogin &&  password.isDirty && password.minLengthError) && \n\t\t\t\t\t\t\t<div style={{color:'red'} }>Password cannot be less 3 and more 8 symbols</div>}\n\t\t\t\t</Form>\n\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={!email.inputValid || !password.inputValid}\n\t\t\t\t\tvariant={\"outline-success\"}\n\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\tonClick={signIn}>\n\t\t\t\t\t{isLogin ? \"Sign in\" : \"Log up\"}\n\t\t\t\t</Button>\n\n\t\t\t\t{isLogin ?\n\t\t\t\t\t<div className=\"mt-3\">Don't have an account yet?\n\t\t\t\t\t\t<NavLink to={REGISTRATION_ROUTE}> Create an account.</NavLink>\n\t\t\t\t\t</div>\n\t\t\t\t\t:\n\t\t\t\t\t<div className=\"mt-3\">Already have an account?\n\t\t\t\t\t\t<NavLink to={LOGIN_ROUTE}> Sign in</NavLink>\n\t\t\t\t\t</div>}\n\t\t\t</Card>\n\n\t\t</Container>\n\t);\n}\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}